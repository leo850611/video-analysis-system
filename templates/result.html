{% extends "layout.html" %}
{% block body %}
					<!-- Nav -->
						<nav id="nav">
							<ul>
								<li><a href="/">首頁</a></li>
                                <li>
									<a href="#">訓練</a>
									<ul>
										<li><a href="/train-pic">照片上傳</a></li>
										<li><a href="/train-cam">拍照上傳</a></li>
									</ul>
								</li>
								<li><a href="/upload">影片上傳</a></li>
								<li><a href="/analysis">影像分析</a></li>
								<li class="current"><a href="/result">比對結果</a></li>
                                <li><a href="/admin">檔案管理</a></li>
							</ul>
						</nav>
				</div>
<section class="wrapper style1">
<div class="container">
<div id="content">

<style>
#chartdiv {
  width: 100%;
  height: 500px;
}																	
</style>

    <label>影片名稱：</label>
    {% with video = get_flashed_messages(category_filter=["video"]) %}
    {% if video %}
    {% for message in video %}
    <p>{{ message }}</p>
    {% endfor %}
    {% endif %}
    {% endwith %}
    
    <label>出現時間：</label>
    
    {% with msg = get_flashed_messages(category_filter=["msg"]) %}
    {% if msg %}
    <div id="content" align='center'>
    <img src={{ url_for('static', filename='images/loading.gif') }}/>
    <div>
    {% for message in msg %}
    <div class=flash align="center" style="color:blue;">{{ message }}</div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    
    {% with err = get_flashed_messages(category_filter=["err"]) %}
    {% if err %}
    {% for message in err %}
    <div class=flash align="center" style="color:red;">{{ message }}</div>
    {% endfor %}
    {% endif %}
    {% endwith %}
    
    <!-- 
    <script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
    <script src="https://www.amcharts.com/lib/3/serial.js"></script>
    <script src="https://www.amcharts.com/lib/3/gantt.js"></script>
    <script src="https://www.amcharts.com/lib/3/themes/light.js"></script>
    <script src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
    <link rel="stylesheet" href="https://www.amcharts.com/lib/3/plugins/export/export.css" type="text/css" media="all" />
    -->
    <script src="{{ url_for('static', filename='assets/amcharts/amcharts.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/amcharts/serial.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/amcharts/gantt.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/amcharts/light.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/amcharts/export.min.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/amcharts/export.css') }}" type="text/css" media="all" />
    {% with timejs = get_flashed_messages(category_filter=["timejs"]) %}
    {% if timejs %}
    {% for message in timejs %}
    <script src='static/assets/time.js?{{ message }}'></script>
    {% endfor %}
    {% endif %}
    {% endwith %}
    <div id="chartdiv"></div>
    
    <script>
        setTimeout(function(){
            var xhr = new XMLHttpRequest();
                xhr.open('GET', "api/run", true);
                xhr.send(null);
                xhr.onload = function () {
                    var res = this.responseText;
                    if(res == "running"){
                        //alert(res);
                        window.location.reload();
                    }
                };
        }, 5000);
    </script>
    
    
</div>
</div> 
</section>    
{% endblock %}